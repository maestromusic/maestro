#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# Copyright 2009 Martin Altmayer
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 3 as
# published by the Free Software Foundation
#

"""Convenience script to reset the database (drop all tables and create them again)."""

from omg import database,config

if input("Really? (y,n)") != "y":
    quit()

config.init({})    
database.connect()
print("Resetting database...")
database.resetDatabase()
print("...done")

# Check for superfluous tables
if database.checkSuperfluousTables():
    if input("Drop superfluous tables? (y,n)") == "y":
        database.checkSuperfluousTables(fix=True)
        print("...done")
